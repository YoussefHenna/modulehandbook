<h3>Version History of Course: <%= @course.name %></h3>
<p class="bg-<%= @course.aasm_state %>">
  <strong>State:</strong>
  <%= @course.aasm_state.humanize.titleize %>
</p>

Part of Programs:
<% if @programs.size > 0 %>
  <% @programs.each do |program_name, program_id| %>
  <%= link_to program_name, program_path(program_id)  %>,
  <% end %>
<% else %>
  none
<% end %>
<br/><br/>

<table class="table table-hover">
  <thead>
    <th>Author</th>
    <th>Event</th>
    <th>Version Details</th>
    <th></th>
  </thead>
  <tbody>

<% @versions.each do |version| %>
  <tr>
    <td><%= User.find(version.whodunnit).email %></td>
    <td><%= version.event %></td>
    <td>
      <% version.changeset.each do |change| %>
      Changed "<%= change[0] %>" from "<%= change[1][0] %>" to "<%= change[1][1] %>" <br/>
      <% end %>

    </td>
    <td><%= link_to 'Revert to this Version', '' %></td>
    </tr>
  <% end %>
  </tbody>
</table>




<% if can? :change_state, @course %>
  End current Phase and go to next State -
  <% @course.aasm.events.each do |event| %>
    <%= button_to event.name.to_s.humanize.titleize, change_state_path, params: { course_id: @course.id, event_name: event.name } %>
  <% end %>
<% end %>
